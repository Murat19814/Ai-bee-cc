{% extends "base.html" %}

{% block title %}Yeni Ticket - AI BEE CC{% endblock %}

{% block content %}
<div class="page-header">
    <div>
        <h1 class="page-title" data-tr="Yeni Ticket" data-de="Neues Ticket">Yeni Ticket</h1>
        <p class="page-subtitle" data-tr="Destek talebi oluşturun" data-de="Erstellen Sie ein Support-Ticket">Destek talebi oluşturun</p>
    </div>
</div>

<div class="card" style="max-width: 900px;">
    <div class="card-body">
        <form method="POST">
            <div class="form-group">
                <label class="form-label" data-tr="Konu" data-de="Betreff">Konu</label>
                <input type="text" name="subject" class="form-control" required
                       placeholder="Örn: Giriş sorunu"
                       data-tr-placeholder="Örn: Giriş sorunu"
                       data-de-placeholder="Z.B.: Login-Problem">
            </div>

            <div class="grid grid-cols-2">
                <div class="form-group">
                    <label class="form-label" data-tr="Müşteri (opsiyonel)" data-de="Kunde (optional)">Müşteri (opsiyonel)</label>
                    <select name="customer_id" class="form-control">
                        <option value="" data-tr="- Seçiniz -" data-de="- Wählen -">- Seçiniz -</option>
                        {% for c in customers %}
                        <option value="{{ c.id }}">{{ c.full_name }}{% if c.phone %} ({{ c.phone }}){% endif %}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label" data-tr="Kategori (opsiyonel)" data-de="Kategorie (optional)">Kategori (opsiyonel)</label>
                    <select name="category_id" class="form-control">
                        <option value="" data-tr="- Seçiniz -" data-de="- Wählen -">- Seçiniz -</option>
                        {% for cat in categories %}
                        <option value="{{ cat.id }}">{{ cat.name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <div class="grid grid-cols-2">
                <div class="form-group">
                    <label class="form-label" data-tr="Öncelik" data-de="Priorität">Öncelik</label>
                    <select name="priority" class="form-control">
                        <option value="low" data-tr="Düşük" data-de="Niedrig">Düşük</option>
                        <option value="normal" selected data-tr="Normal" data-de="Normal">Normal</option>
                        <option value="high" data-tr="Yüksek" data-de="Hoch">Yüksek</option>
                        <option value="urgent" data-tr="Acil" data-de="Dringend">Acil</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label" data-tr="Durum" data-de="Status">Durum</label>
                    <input type="text" class="form-control" value="open" disabled>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" data-tr="Açıklama" data-de="Beschreibung">Açıklama</label>
                <textarea name="description" class="form-control" rows="5"
                          placeholder="Detayları yazın..."
                          data-tr-placeholder="Detayları yazın..."
                          data-de-placeholder="Beschreiben Sie die Details..."></textarea>
            </div>

            <div class="d-flex gap-2" style="margin-top: 2rem;">
                <button type="submit" class="btn btn-primary">
                    <i class="ti ti-check"></i>
                    <span data-tr="Kaydet" data-de="Speichern">Kaydet</span>
                </button>
                <a href="{{ url_for('tickets') }}" class="btn btn-secondary">
                    <span data-tr="İptal" data-de="Abbrechen">İptal</span>
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
