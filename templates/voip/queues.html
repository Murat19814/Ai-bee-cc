{% extends "base.html" %}

{% block title %}CC Satış & QC Yönetimi - {{ app_name }}{% endblock %}

{% block extra_css %}
<style>
.voip-page { padding: 1.5rem; }

/* CC Panel */
.cc-panel {
    background: white;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.06);
    overflow: hidden;
    margin-bottom: 1.5rem;
}

.cc-panel-header {
    padding: 1rem 1.25rem;
    background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%);
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.cc-panel-header.blue { background: linear-gradient(135deg, #2196F3, #1976D2); }
.cc-panel-header.orange { background: linear-gradient(135deg, #F5A623, #D4920A); }
.cc-panel-header.green { background: linear-gradient(135deg, #4CAF50, #388E3C); }
.cc-panel-header.teal { background: linear-gradient(135deg, #009688, #00796B); }

.cc-panel-title {
    font-size: 1.2rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.cc-panel-title i { color: #FFD700; }

.cc-panel-actions {
    display: flex;
    gap: 0.5rem;
}

.cc-panel-actions .btn {
    padding: 0.4rem 0.75rem;
    font-size: 0.8rem;
    background: rgba(255,255,255,0.2);
    border: none;
    color: white;
    border-radius: 8px;
    cursor: pointer;
}

.cc-panel-actions .btn:hover {
    background: rgba(255,255,255,0.3);
}

.cc-panel-body { padding: 1.25rem; }

/* Branch Tabs */
.branch-tabs {
    display: flex;
    gap: 0.5rem;
    padding: 0.75rem 1.25rem;
    background: #f8f9fa;
    border-bottom: 1px solid #eee;
    overflow-x: auto;
}

.branch-tab {
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
    cursor: pointer;
    border: 2px solid transparent;
    background: white;
    transition: all 0.2s;
    white-space: nowrap;
}

.branch-tab:hover {
    border-color: #9C27B0;
}

.branch-tab.active {
    background: linear-gradient(135deg, #9C27B0, #7B1FA2);
    color: white;
}

.branch-tab .branch-count {
    background: rgba(255,255,255,0.3);
    padding: 0.1rem 0.4rem;
    border-radius: 10px;
    font-size: 0.7rem;
    margin-left: 0.3rem;
}

.add-branch-btn {
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.8rem;
    cursor: pointer;
    border: 2px dashed #ccc;
    background: transparent;
    color: #888;
}

.add-branch-btn:hover {
    border-color: #9C27B0;
    color: #9C27B0;
}

/* Sales Stats Grid */
.sales-stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 0.75rem;
    margin-bottom: 1rem;
}

.sales-stat {
    text-align: center;
    padding: 1rem 0.5rem;
    background: #f8f9fa;
    border-radius: 12px;
    transition: all 0.3s;
}

.sales-stat:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.sales-stat-value {
    font-size: 1.75rem;
    font-weight: 800;
    font-family: var(--font-display);
}

.sales-stat-value.sale { color: #FF9800; }
.sales-stat-value.qc-ok { color: #4CAF50; }
.sales-stat-value.termin { color: #2196F3; }
.sales-stat-value.storno { color: #f44336; }

.sales-stat-label {
    font-size: 0.7rem;
    color: #666;
    text-transform: uppercase;
    margin-top: 0.25rem;
}

/* Agent Sales List */
.agent-sales-list {
    margin-top: 1rem;
    border-top: 1px solid #eee;
    padding-top: 1rem;
}

.section-title {
    font-size: 0.85rem;
    font-weight: 700;
    color: #333;
    margin-bottom: 0.75rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.section-title i { color: #9C27B0; }
.section-title.green i { color: #4CAF50; }

.agent-sales-row {
    display: flex;
    align-items: center;
    padding: 0.5rem 0;
    border-bottom: 1px solid #f0f0f0;
}

.agent-sales-row:last-child { border-bottom: none; }

.agent-avatar-sm {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea, #764ba2);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 0.75rem;
    font-weight: 600;
    margin-right: 0.75rem;
}

.agent-info { flex: 1; }
.agent-name { font-weight: 600; font-size: 0.85rem; }
.agent-team { font-size: 0.7rem; color: #888; }

.agent-stats {
    display: flex;
    gap: 0.5rem;
}

.agent-stat-badge {
    padding: 0.25rem 0.5rem;
    border-radius: 6px;
    font-size: 0.7rem;
    font-weight: 700;
}

.agent-stat-badge.sale { background: #FFF3E0; color: #E65100; }
.agent-stat-badge.ok { background: #E8F5E9; color: #2E7D32; }
.agent-stat-badge.termin { background: #E3F2FD; color: #1565C0; }

/* QC Dinleme Section inside CC */
.qc-section {
    margin-top: 1.5rem;
    padding: 1rem;
    background: linear-gradient(145deg, #E8F5E9, #C8E6C9);
    border-radius: 12px;
    border-left: 4px solid #4CAF50;
}

.qc-stats-row {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 0.5rem;
    margin-bottom: 1rem;
}

.qc-stat {
    text-align: center;
    padding: 0.75rem;
    background: white;
    border-radius: 10px;
}

.qc-stat-value {
    font-size: 1.25rem;
    font-weight: 800;
}

.qc-stat-value.total { color: #9C27B0; }
.qc-stat-value.listened { color: #4CAF50; }
.qc-stat-value.pending { color: #FF9800; }
.qc-stat-value.approved { color: #2196F3; }
.qc-stat-value.rejected { color: #f44336; }

.qc-stat-label {
    font-size: 0.65rem;
    color: #666;
    margin-top: 0.25rem;
}

/* QC Reviewer */
.qc-reviewer-row {
    display: flex;
    align-items: center;
    padding: 0.5rem;
    background: white;
    border-radius: 8px;
    margin-bottom: 0.5rem;
}

.qc-reviewer-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: linear-gradient(135deg, #4CAF50, #8BC34A);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 700;
    font-size: 0.8rem;
    margin-right: 0.75rem;
}

.qc-reviewer-info { flex: 1; }
.qc-reviewer-name { font-weight: 700; font-size: 0.85rem; }
.qc-reviewer-role { font-size: 0.7rem; color: #888; }

.qc-mini-stats {
    display: flex;
    gap: 0.75rem;
}

.qc-mini-stat {
    text-align: center;
}

.qc-mini-stat-value {
    font-size: 1rem;
    font-weight: 700;
}

.qc-mini-stat-label {
    font-size: 0.6rem;
    color: #888;
}

/* Add CC Button */
.add-cc-panel {
    border: 2px dashed #ccc;
    background: transparent;
    border-radius: 16px;
    padding: 3rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s;
    color: #888;
    margin-bottom: 1.5rem;
}

.add-cc-panel:hover {
    border-color: #9C27B0;
    color: #9C27B0;
    background: rgba(156, 39, 176, 0.05);
}

.add-cc-panel i { font-size: 2.5rem; margin-bottom: 0.5rem; }

/* Modal */
.modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(4px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s;
}

.modal-overlay.show { opacity: 1; visibility: visible; }

.modal-content {
    background: white;
    border-radius: 20px;
    width: 100%;
    max-width: 500px;
    max-height: 90vh;
    overflow: hidden;
}

.modal-header {
    padding: 1.25rem;
    background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%);
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-header h3 {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1.1rem;
}

.modal-close {
    background: rgba(255,255,255,0.2);
    border: none;
    color: white;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    cursor: pointer;
}

.modal-body { padding: 1.25rem; }
.modal-footer { padding: 1rem 1.25rem; background: #f8f9fa; display: flex; gap: 1rem; justify-content: flex-end; }

.form-group { margin-bottom: 1rem; }
.form-group label { display: block; margin-bottom: 0.5rem; font-weight: 600; color: #333; font-size: 0.85rem; }
.form-control { width: 100%; padding: 0.75rem 1rem; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 0.9rem; }
.form-control:focus { outline: none; border-color: #9C27B0; }
</style>
{% endblock %}

{% block content %}
<div class="voip-page">
    <div class="page-header">
        <div>
            <h1 class="page-title">
                <i class="ti ti-building-store" style="color: #9C27B0;"></i>
                <span data-tr="CC Satış & QC Yönetimi" data-de="CC Verkaufs- & QC-Management">CC Satış & QC Yönetimi</span>
            </h1>
            <p class="page-subtitle" data-tr="Call Center ve şube bazlı satış takibi ve kalite kontrol" data-de="Call Center und filialbasierte Verkaufsverfolgung und Qualitätskontrolle">Call Center ve şube bazlı satış takibi ve kalite kontrol</p>
        </div>
        <div class="page-header-actions">
            <button class="btn btn-primary" onclick="openAddCCModal()">
                <i class="ti ti-plus"></i> <span data-tr="Yeni CC Ekle" data-de="Neues CC hinzufügen">Yeni CC Ekle</span>
            </button>
        </div>
    </div>

    <!-- Summary Stats -->
    <div class="grid grid-cols-4 gap-4 mt-4 mb-4">
        <div class="stat-card" style="background: linear-gradient(145deg, #FFF3E0, #FFE0B2); border-left: 4px solid #FF9800;">
            <div class="stat-card-inner">
                <div class="icon-3d orange"><i class="ti ti-shopping-cart"></i></div>
                <div class="stat-content">
                    <div class="stat-value">156</div>
                    <div class="stat-label" data-tr="Toplam Satış" data-de="Gesamtverkauf">Toplam Satış</div>
                </div>
            </div>
        </div>
        <div class="stat-card" style="background: linear-gradient(145deg, #E8F5E9, #C8E6C9); border-left: 4px solid #4CAF50;">
            <div class="stat-card-inner">
                <div class="icon-3d green"><i class="ti ti-check"></i></div>
                <div class="stat-content">
                    <div class="stat-value">98</div>
                    <div class="stat-label">QC OK</div>
                </div>
            </div>
        </div>
        <div class="stat-card" style="background: linear-gradient(145deg, #E3F2FD, #BBDEFB); border-left: 4px solid #2196F3;">
            <div class="stat-card-inner">
                <div class="icon-3d blue"><i class="ti ti-calendar"></i></div>
                <div class="stat-content">
                    <div class="stat-value">45</div>
                    <div class="stat-label">Termin</div>
                </div>
            </div>
        </div>
        <div class="stat-card" style="background: linear-gradient(145deg, #FFEBEE, #FFCDD2); border-left: 4px solid #f44336;">
            <div class="stat-card-inner">
                <div class="icon-3d red"><i class="ti ti-x"></i></div>
                <div class="stat-content">
                    <div class="stat-value">13</div>
                    <div class="stat-label">Storno</div>
                </div>
            </div>
        </div>
    </div>

    <!-- CC 1 Panel - Example: TeleSales GmbH -->
    <div class="cc-panel" data-cc-id="1">
        <div class="cc-panel-header">
            <div class="cc-panel-title">
                <i class="ti ti-building-store"></i>
                <span>TeleSales GmbH</span>
            </div>
            <div class="cc-panel-actions">
                <button class="btn" onclick="editCC(1)"><i class="ti ti-edit"></i></button>
                <button class="btn" onclick="deleteCC(1)"><i class="ti ti-trash"></i></button>
            </div>
        </div>
        
        <!-- Branch Tabs -->
        <div class="branch-tabs">
            <div class="branch-tab active" data-branch="all">
                <span data-tr="Tümü" data-de="Alle">Tümü</span>
                <span class="branch-count">63</span>
            </div>
            <div class="branch-tab" data-branch="istanbul">
                İstanbul
                <span class="branch-count">28</span>
            </div>
            <div class="branch-tab" data-branch="ankara">
                Ankara
                <span class="branch-count">20</span>
            </div>
            <div class="branch-tab" data-branch="izmir">
                İzmir
                <span class="branch-count">15</span>
            </div>
            <button class="add-branch-btn" onclick="addBranch(1)">
                <i class="ti ti-plus"></i> <span data-tr="Şube Ekle" data-de="Filiale hinzufügen">Şube Ekle</span>
            </button>
        </div>

        <div class="cc-panel-body">
            <!-- Sales Stats -->
            <div class="sales-stats-grid">
                <div class="sales-stat">
                    <div class="sales-stat-value sale">63</div>
                    <div class="sales-stat-label">Sale</div>
                </div>
                <div class="sales-stat">
                    <div class="sales-stat-value qc-ok">42</div>
                    <div class="sales-stat-label">QC OK</div>
                </div>
                <div class="sales-stat">
                    <div class="sales-stat-value termin">28</div>
                    <div class="sales-stat-label">Termin</div>
                </div>
                <div class="sales-stat">
                    <div class="sales-stat-value storno">5</div>
                    <div class="sales-stat-label">Storno</div>
                </div>
            </div>

            <!-- Agent Performance -->
            <div class="agent-sales-list">
                <div class="section-title">
                    <i class="ti ti-users"></i>
                    <span data-tr="Agent Performansı" data-de="Agent-Leistung">Agent Performansı</span>
                </div>
                <div class="agent-sales-row">
                    <div class="agent-avatar-sm">AK</div>
                    <div class="agent-info">
                        <div class="agent-name">Ahmet K.</div>
                        <div class="agent-team">İstanbul</div>
                    </div>
                    <div class="agent-stats">
                        <span class="agent-stat-badge sale">12 Sale</span>
                        <span class="agent-stat-badge ok">8 OK</span>
                        <span class="agent-stat-badge termin">6 T</span>
                    </div>
                </div>
                <div class="agent-sales-row">
                    <div class="agent-avatar-sm">BY</div>
                    <div class="agent-info">
                        <div class="agent-name">Buse Y.</div>
                        <div class="agent-team">Ankara</div>
                    </div>
                    <div class="agent-stats">
                        <span class="agent-stat-badge sale">15 Sale</span>
                        <span class="agent-stat-badge ok">10 OK</span>
                        <span class="agent-stat-badge termin">8 T</span>
                    </div>
                </div>
                <div class="agent-sales-row">
                    <div class="agent-avatar-sm">CD</div>
                    <div class="agent-info">
                        <div class="agent-name">Can D.</div>
                        <div class="agent-team">İzmir</div>
                    </div>
                    <div class="agent-stats">
                        <span class="agent-stat-badge sale">10 Sale</span>
                        <span class="agent-stat-badge ok">7 OK</span>
                        <span class="agent-stat-badge termin">5 T</span>
                    </div>
                </div>
            </div>

            <!-- QC Dinleme Section -->
            <div class="qc-section">
                <div class="section-title green">
                    <i class="ti ti-headphones"></i>
                    <span data-tr="QC DİNLEME" data-de="QC ANHÖREN">QC DİNLEME</span>
                </div>
                
                <div class="qc-stats-row">
                    <div class="qc-stat">
                        <div class="qc-stat-value total">63</div>
                        <div class="qc-stat-label" data-tr="Toplam" data-de="Gesamt">Toplam</div>
                    </div>
                    <div class="qc-stat">
                        <div class="qc-stat-value listened">47</div>
                        <div class="qc-stat-label" data-tr="Dinlenen" data-de="Angehört">Dinlenen</div>
                    </div>
                    <div class="qc-stat">
                        <div class="qc-stat-value pending">16</div>
                        <div class="qc-stat-label" data-tr="Bekleyen" data-de="Ausstehend">Bekleyen</div>
                    </div>
                    <div class="qc-stat">
                        <div class="qc-stat-value approved">42</div>
                        <div class="qc-stat-label" data-tr="Onaylı" data-de="Genehmigt">Onaylı</div>
                    </div>
                    <div class="qc-stat">
                        <div class="qc-stat-value rejected">5</div>
                        <div class="qc-stat-label" data-tr="Ret" data-de="Abgelehnt">Ret</div>
                    </div>
                </div>

                <div class="section-title green" style="margin-top: 0.75rem;">
                    <i class="ti ti-user-check"></i>
                    <span data-tr="QC Dinleyicileri" data-de="QC Zuhörer">QC Dinleyicileri</span>
                </div>

                <div class="qc-reviewer-row">
                    <div class="qc-reviewer-avatar">MK</div>
                    <div class="qc-reviewer-info">
                        <div class="qc-reviewer-name">Mehmet K.</div>
                        <div class="qc-reviewer-role">QC Uzmanı</div>
                    </div>
                    <div class="qc-mini-stats">
                        <div class="qc-mini-stat">
                            <div class="qc-mini-stat-value" style="color: #4CAF50;">25</div>
                            <div class="qc-mini-stat-label" data-tr="Dinledi" data-de="Angehört">Dinledi</div>
                        </div>
                        <div class="qc-mini-stat">
                            <div class="qc-mini-stat-value" style="color: #2196F3;">22</div>
                            <div class="qc-mini-stat-label">OK</div>
                        </div>
                        <div class="qc-mini-stat">
                            <div class="qc-mini-stat-value" style="color: #f44336;">3</div>
                            <div class="qc-mini-stat-label">Ret</div>
                        </div>
                    </div>
                </div>
                <div class="qc-reviewer-row">
                    <div class="qc-reviewer-avatar">AB</div>
                    <div class="qc-reviewer-info">
                        <div class="qc-reviewer-name">Ayşe B.</div>
                        <div class="qc-reviewer-role">QC Uzmanı</div>
                    </div>
                    <div class="qc-mini-stats">
                        <div class="qc-mini-stat">
                            <div class="qc-mini-stat-value" style="color: #4CAF50;">22</div>
                            <div class="qc-mini-stat-label" data-tr="Dinledi" data-de="Angehört">Dinledi</div>
                        </div>
                        <div class="qc-mini-stat">
                            <div class="qc-mini-stat-value" style="color: #2196F3;">20</div>
                            <div class="qc-mini-stat-label">OK</div>
                        </div>
                        <div class="qc-mini-stat">
                            <div class="qc-mini-stat-value" style="color: #f44336;">2</div>
                            <div class="qc-mini-stat-label">Ret</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- CC 2 Panel - Example: ServicePro AG -->
    <div class="cc-panel" data-cc-id="2">
        <div class="cc-panel-header blue">
            <div class="cc-panel-title">
                <i class="ti ti-headset"></i>
                <span>ServicePro AG</span>
            </div>
            <div class="cc-panel-actions">
                <button class="btn" onclick="editCC(2)"><i class="ti ti-edit"></i></button>
                <button class="btn" onclick="deleteCC(2)"><i class="ti ti-trash"></i></button>
            </div>
        </div>
        
        <!-- Branch Tabs -->
        <div class="branch-tabs">
            <div class="branch-tab active" data-branch="all">
                <span data-tr="Tümü" data-de="Alle">Tümü</span>
                <span class="branch-count">58</span>
            </div>
            <div class="branch-tab" data-branch="berlin">
                Berlin
                <span class="branch-count">30</span>
            </div>
            <div class="branch-tab" data-branch="munich">
                München
                <span class="branch-count">28</span>
            </div>
            <button class="add-branch-btn" onclick="addBranch(2)">
                <i class="ti ti-plus"></i> <span data-tr="Şube Ekle" data-de="Filiale hinzufügen">Şube Ekle</span>
            </button>
        </div>

        <div class="cc-panel-body">
            <!-- Sales Stats -->
            <div class="sales-stats-grid">
                <div class="sales-stat">
                    <div class="sales-stat-value sale">58</div>
                    <div class="sales-stat-label">Sale</div>
                </div>
                <div class="sales-stat">
                    <div class="sales-stat-value qc-ok">38</div>
                    <div class="sales-stat-label">QC OK</div>
                </div>
                <div class="sales-stat">
                    <div class="sales-stat-value termin">12</div>
                    <div class="sales-stat-label">Termin</div>
                </div>
                <div class="sales-stat">
                    <div class="sales-stat-value storno">8</div>
                    <div class="sales-stat-label">Storno</div>
                </div>
            </div>

            <!-- Agent Performance -->
            <div class="agent-sales-list">
                <div class="section-title">
                    <i class="ti ti-users"></i>
                    <span data-tr="Agent Performansı" data-de="Agent-Leistung">Agent Performansı</span>
                </div>
                <div class="agent-sales-row">
                    <div class="agent-avatar-sm">HS</div>
                    <div class="agent-info">
                        <div class="agent-name">Hans S.</div>
                        <div class="agent-team">Berlin</div>
                    </div>
                    <div class="agent-stats">
                        <span class="agent-stat-badge sale">18 Sale</span>
                        <span class="agent-stat-badge ok">12 OK</span>
                        <span class="agent-stat-badge termin">4 T</span>
                    </div>
                </div>
                <div class="agent-sales-row">
                    <div class="agent-avatar-sm">LM</div>
                    <div class="agent-info">
                        <div class="agent-name">Lisa M.</div>
                        <div class="agent-team">München</div>
                    </div>
                    <div class="agent-stats">
                        <span class="agent-stat-badge sale">22 Sale</span>
                        <span class="agent-stat-badge ok">15 OK</span>
                        <span class="agent-stat-badge termin">5 T</span>
                    </div>
                </div>
            </div>

            <!-- QC Dinleme Section -->
            <div class="qc-section">
                <div class="section-title green">
                    <i class="ti ti-headphones"></i>
                    <span data-tr="QC DİNLEME" data-de="QC ANHÖREN">QC DİNLEME</span>
                </div>
                
                <div class="qc-stats-row">
                    <div class="qc-stat">
                        <div class="qc-stat-value total">58</div>
                        <div class="qc-stat-label" data-tr="Toplam" data-de="Gesamt">Toplam</div>
                    </div>
                    <div class="qc-stat">
                        <div class="qc-stat-value listened">46</div>
                        <div class="qc-stat-label" data-tr="Dinlenen" data-de="Angehört">Dinlenen</div>
                    </div>
                    <div class="qc-stat">
                        <div class="qc-stat-value pending">12</div>
                        <div class="qc-stat-label" data-tr="Bekleyen" data-de="Ausstehend">Bekleyen</div>
                    </div>
                    <div class="qc-stat">
                        <div class="qc-stat-value approved">38</div>
                        <div class="qc-stat-label" data-tr="Onaylı" data-de="Genehmigt">Onaylı</div>
                    </div>
                    <div class="qc-stat">
                        <div class="qc-stat-value rejected">8</div>
                        <div class="qc-stat-label" data-tr="Ret" data-de="Abgelehnt">Ret</div>
                    </div>
                </div>

                <div class="section-title green" style="margin-top: 0.75rem;">
                    <i class="ti ti-user-check"></i>
                    <span data-tr="QC Dinleyicileri" data-de="QC Zuhörer">QC Dinleyicileri</span>
                </div>

                <div class="qc-reviewer-row">
                    <div class="qc-reviewer-avatar">TW</div>
                    <div class="qc-reviewer-info">
                        <div class="qc-reviewer-name">Thomas W.</div>
                        <div class="qc-reviewer-role">QC Manager</div>
                    </div>
                    <div class="qc-mini-stats">
                        <div class="qc-mini-stat">
                            <div class="qc-mini-stat-value" style="color: #4CAF50;">28</div>
                            <div class="qc-mini-stat-label" data-tr="Dinledi" data-de="Angehört">Dinledi</div>
                        </div>
                        <div class="qc-mini-stat">
                            <div class="qc-mini-stat-value" style="color: #2196F3;">23</div>
                            <div class="qc-mini-stat-label">OK</div>
                        </div>
                        <div class="qc-mini-stat">
                            <div class="qc-mini-stat-value" style="color: #f44336;">5</div>
                            <div class="qc-mini-stat-label">Ret</div>
                        </div>
                    </div>
                </div>
                <div class="qc-reviewer-row">
                    <div class="qc-reviewer-avatar">SK</div>
                    <div class="qc-reviewer-info">
                        <div class="qc-reviewer-name">Sarah K.</div>
                        <div class="qc-reviewer-role">QC Spezialist</div>
                    </div>
                    <div class="qc-mini-stats">
                        <div class="qc-mini-stat">
                            <div class="qc-mini-stat-value" style="color: #4CAF50;">18</div>
                            <div class="qc-mini-stat-label" data-tr="Dinledi" data-de="Angehört">Dinledi</div>
                        </div>
                        <div class="qc-mini-stat">
                            <div class="qc-mini-stat-value" style="color: #2196F3;">15</div>
                            <div class="qc-mini-stat-label">OK</div>
                        </div>
                        <div class="qc-mini-stat">
                            <div class="qc-mini-stat-value" style="color: #f44336;">3</div>
                            <div class="qc-mini-stat-label">Ret</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add New CC Button -->
    <div class="add-cc-panel" onclick="openAddCCModal()">
        <i class="ti ti-building-plus"></i>
        <span style="font-size: 1.1rem; font-weight: 600;" data-tr="Yeni Call Center Ekle" data-de="Neues Call Center hinzufügen">Yeni Call Center Ekle</span>
        <span style="font-size: 0.85rem; margin-top: 0.25rem;" data-tr="Şubeler ve QC takibi ile birlikte" data-de="Mit Filialen und QC-Tracking">Şubeler ve QC takibi ile birlikte</span>
    </div>
</div>

<!-- Add CC Modal -->
<div class="modal-overlay" id="addCCModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3><i class="ti ti-building-plus"></i> <span data-tr="Yeni CC Ekle" data-de="Neues CC hinzufügen">Yeni CC Ekle</span></h3>
            <button class="modal-close" onclick="closeModal('addCCModal')"><i class="ti ti-x"></i></button>
        </div>
        <form id="addCCForm" onsubmit="submitNewCC(event)">
            <div class="modal-body">
                <div class="form-group">
                    <label data-tr="CC Adı" data-de="CC Name">CC Adı</label>
                    <input type="text" class="form-control" name="cc_name" required placeholder="Örn: ABC Telecom GmbH">
                </div>
                <div class="form-group">
                    <label data-tr="Renk Teması" data-de="Farbschema">Renk Teması</label>
                    <select class="form-control" name="cc_color">
                        <option value="">Mor (Varsayılan)</option>
                        <option value="blue">Mavi</option>
                        <option value="green">Yeşil</option>
                        <option value="orange">Turuncu</option>
                        <option value="teal">Turkuaz</option>
                    </select>
                </div>
                <div class="form-group">
                    <label data-tr="İlk Şube (Şehir)" data-de="Erste Filiale (Stadt)">İlk Şube (Şehir)</label>
                    <input type="text" class="form-control" name="first_branch" placeholder="Örn: İstanbul">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('addCCModal')">
                    <span data-tr="İptal" data-de="Abbrechen">İptal</span>
                </button>
                <button type="submit" class="btn btn-primary">
                    <i class="ti ti-plus"></i> <span data-tr="Ekle" data-de="Hinzufügen">Ekle</span>
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Add Branch Modal -->
<div class="modal-overlay" id="addBranchModal">
    <div class="modal-content">
        <div class="modal-header" style="background: linear-gradient(135deg, #4CAF50, #388E3C);">
            <h3><i class="ti ti-map-pin-plus"></i> <span data-tr="Şube Ekle" data-de="Filiale hinzufügen">Şube Ekle</span></h3>
            <button class="modal-close" onclick="closeModal('addBranchModal')"><i class="ti ti-x"></i></button>
        </div>
        <form id="addBranchForm" onsubmit="submitNewBranch(event)">
            <input type="hidden" name="cc_id" id="branchCCId">
            <div class="modal-body">
                <div class="form-group">
                    <label data-tr="Şube Adı (Şehir)" data-de="Filialname (Stadt)">Şube Adı (Şehir)</label>
                    <input type="text" class="form-control" name="branch_name" required placeholder="Örn: Bursa, Antalya, Köln...">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('addBranchModal')">
                    <span data-tr="İptal" data-de="Abbrechen">İptal</span>
                </button>
                <button type="submit" class="btn btn-success">
                    <i class="ti ti-plus"></i> <span data-tr="Ekle" data-de="Hinzufügen">Ekle</span>
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Modal functions
function openAddCCModal() {
    document.getElementById('addCCModal').classList.add('show');
}

function closeModal(id) {
    document.getElementById(id).classList.remove('show');
}

// Add Branch
function addBranch(ccId) {
    document.getElementById('branchCCId').value = ccId;
    document.getElementById('addBranchModal').classList.add('show');
}

function submitNewBranch(e) {
    e.preventDefault();
    const form = e.target;
    const ccId = form.cc_id.value;
    const branchName = form.branch_name.value;
    
    // Find CC panel and add branch tab
    const ccPanel = document.querySelector(`[data-cc-id="${ccId}"]`);
    const branchTabs = ccPanel.querySelector('.branch-tabs');
    const addBtn = branchTabs.querySelector('.add-branch-btn');
    
    const newTab = document.createElement('div');
    newTab.className = 'branch-tab';
    newTab.setAttribute('data-branch', branchName.toLowerCase());
    newTab.innerHTML = `${branchName}<span class="branch-count">0</span>`;
    
    branchTabs.insertBefore(newTab, addBtn);
    
    closeModal('addBranchModal');
    form.reset();
    
    alert(document.documentElement.lang === 'de' ? `Filiale "${branchName}" hinzugefügt` : `"${branchName}" şubesi eklendi`);
}

// Submit new CC
function submitNewCC(e) {
    e.preventDefault();
    const form = e.target;
    const name = form.cc_name.value;
    const color = form.cc_color.value;
    const firstBranch = form.first_branch.value;
    
    alert(document.documentElement.lang === 'de' ? `CC "${name}" wird erstellt...` : `"${name}" CC oluşturuluyor...`);
    
    closeModal('addCCModal');
    form.reset();
    location.reload(); // Temporary - will use AJAX in production
}

// Edit CC
function editCC(id) {
    alert(document.documentElement.lang === 'de' ? 'CC bearbeiten #' + id : 'CC düzenle #' + id);
}

// Delete CC
function deleteCC(id) {
    const msg = document.documentElement.lang === 'de' 
        ? 'Dieses CC wirklich löschen?' 
        : 'Bu CC\'yi silmek istediğinize emin misiniz?';
    
    if (confirm(msg)) {
        document.querySelector(`[data-cc-id="${id}"]`).remove();
    }
}

// Branch tab click
document.querySelectorAll('.branch-tab').forEach(tab => {
    tab.addEventListener('click', function() {
        const parent = this.closest('.branch-tabs');
        parent.querySelectorAll('.branch-tab').forEach(t => t.classList.remove('active'));
        this.classList.add('active');
        // Filter data by branch - implement as needed
    });
});
</script>
{% endblock %}
