{% extends "base.html" %}

{% block title %}Agent GiriÅŸ - AI BEE CC{% endblock %}

{% block auth_content %}
<div class="auth-card">
    <!-- Language Switcher -->
    <div class="lang-switcher-auth">
        <button class="lang-btn-auth active" onclick="setLang('tr')" id="lang-tr">ðŸ‡¹ðŸ‡· TR</button>
        <button class="lang-btn-auth" onclick="setLang('de')" id="lang-de">ðŸ‡©ðŸ‡ª DE</button>
    </div>
    
    <div class="auth-header">
        <div class="auth-logo" style="background: linear-gradient(135deg, #10B981, #059669);">
            <i class="ti ti-headset"></i>
        </div>
        <span class="agent-badge">
            <i class="ti ti-phone-call"></i> <span data-tr="Agent Paneli" data-de="Agenten Panel">Agent Paneli</span>
        </span>
        <h1 class="auth-title">AI BEE CC</h1>
        <p class="auth-subtitle" data-tr="OperatÃ¶r GiriÅŸi" data-de="Operator Login">OperatÃ¶r GiriÅŸi</p>
    </div>
    
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div class="auth-message {% if category == 'success' %}success{% else %}danger{% endif %}">
        <i class="ti ti-{% if category == 'success' %}check{% else %}alert-circle{% endif %}"></i>
        {{ message }}
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}
    
    <form method="POST" action="{{ url_for('agent_login') }}" class="auth-form">
        <div class="form-group">
            <label class="form-label">
                <i class="ti ti-user"></i>
                <span data-tr="KullanÄ±cÄ± AdÄ±" data-de="Benutzername">KullanÄ±cÄ± AdÄ±</span>
            </label>
            <div class="input-group">
                <span class="input-group-icon">
                    <i class="ti ti-user"></i>
                </span>
                <input type="text" name="username" class="form-control" data-tr-placeholder="Agent kullanÄ±cÄ± adÄ±nÄ±z" data-de-placeholder="Agenten-Benutzername" placeholder="Agent kullanÄ±cÄ± adÄ±nÄ±z" required autofocus>
            </div>
        </div>
        
        <div class="form-group">
            <label class="form-label">
                <i class="ti ti-lock"></i>
                <span data-tr="Åžifre" data-de="Passwort">Åžifre</span>
            </label>
            <div class="input-group">
                <span class="input-group-icon">
                    <i class="ti ti-lock"></i>
                </span>
                <input type="password" name="password" id="passwordInput" class="form-control" data-tr-placeholder="Åžifrenizi girin" data-de-placeholder="Passwort eingeben" placeholder="Åžifrenizi girin" required>
                <button type="button" class="input-group-action" onclick="togglePassword()">
                    <i class="ti ti-eye" id="passwordToggleIcon"></i>
                </button>
            </div>
        </div>
        
        <button type="submit" class="btn btn-agent btn-lg" style="width: 100%; margin-top: 0.5rem;">
            <i class="ti ti-login"></i>
            <span data-tr="GiriÅŸ Yap" data-de="Anmelden">GiriÅŸ Yap</span>
        </button>
    </form>
    
    <div class="agent-info">
        <div class="info-item">
            <i class="ti ti-info-circle"></i>
            <span data-tr="Åžifrenizi unuttuysanÄ±z yÃ¶neticinize baÅŸvurun" data-de="Bei vergessenem Passwort wenden Sie sich an Ihren Administrator">Åžifrenizi unuttuysanÄ±z yÃ¶neticinize baÅŸvurun</span>
        </div>
    </div>
    
    <div class="auth-divider">
        <span data-tr="YÃ¶netici GiriÅŸleri" data-de="Administrator-Logins">YÃ¶netici GiriÅŸleri</span>
    </div>
    
    <div class="auth-links">
        <a href="/login" class="auth-link super-link">
            <i class="ti ti-crown"></i> <span data-tr="Super Admin" data-de="Super Admin">Super Admin</span>
        </a>
        <a href="/cc-admin" class="auth-link admin-link">
            <i class="ti ti-building"></i> <span data-tr="CC Admin" data-de="CC Admin">CC Admin</span>
        </a>
    </div>
    
    <div class="auth-footer">
        <p>
            AI BEE CC <span class="version">v2.0</span>
        </p>
    </div>
</div>

<style>
.lang-switcher-auth {
    position: absolute;
    top: 1rem;
    right: 1rem;
    display: flex;
    gap: 0.25rem;
    background: rgba(0,0,0,0.05);
    padding: 0.2rem;
    border-radius: 6px;
}
.lang-btn-auth {
    padding: 0.35rem 0.6rem;
    border: none;
    background: transparent;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 600;
    font-size: 0.75rem;
    transition: all 0.2s;
}
.lang-btn-auth.active {
    background: white;
    box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    color: #10B981;
}
.agent-badge {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    background: rgba(16, 185, 129, 0.15);
    color: #10B981;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
}
.btn-agent {
    background: linear-gradient(135deg, #10B981, #059669);
    color: white;
    border: none;
    box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
}
.btn-agent:hover {
    box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
}
.agent-info {
    margin-top: 1rem;
    padding: 0.75rem;
    background: rgba(16, 185, 129, 0.05);
    border-radius: 8px;
    border: 1px solid rgba(16, 185, 129, 0.1);
}
.info-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.8rem;
    color: #059669;
}
.auth-divider {
    display: flex;
    align-items: center;
    margin: 1.5rem 0;
    color: var(--text-muted);
    font-size: 0.8rem;
}
.auth-divider::before,
.auth-divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border-color);
}
.auth-divider span {
    padding: 0 1rem;
}
.auth-links {
    display: flex;
    gap: 1rem;
}
.auth-link {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem;
    border-radius: 8px;
    font-size: 0.85rem;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.2s;
}
.auth-link.super-link {
    background: rgba(245, 166, 35, 0.1);
    color: #F5A623;
    border: 1px solid rgba(245, 166, 35, 0.2);
}
.auth-link.super-link:hover {
    background: rgba(245, 166, 35, 0.2);
}
.auth-link.admin-link {
    background: rgba(52, 152, 219, 0.1);
    color: #3498db;
    border: 1px solid rgba(52, 152, 219, 0.2);
}
.auth-link.admin-link:hover {
    background: rgba(52, 152, 219, 0.2);
}
.auth-card {
    position: relative;
}
</style>

<script>
let currentLang = localStorage.getItem('lang') || 'tr';

function setLang(lang) {
    currentLang = lang;
    localStorage.setItem('lang', lang);
    
    document.getElementById('lang-tr').classList.toggle('active', lang === 'tr');
    document.getElementById('lang-de').classList.toggle('active', lang === 'de');
    
    document.querySelectorAll('[data-tr]').forEach(el => {
        const text = el.getAttribute(`data-${lang}`);
        if (text) el.textContent = text;
    });
    
    document.querySelectorAll('[data-tr-placeholder]').forEach(el => {
        const text = el.getAttribute(`data-${lang}-placeholder`);
        if (text) el.placeholder = text;
    });
}

document.addEventListener('DOMContentLoaded', () => setLang(currentLang));

function togglePassword() {
    const input = document.getElementById('passwordInput');
    const icon = document.getElementById('passwordToggleIcon');
    
    if (input.type === 'password') {
        input.type = 'text';
        icon.classList.remove('ti-eye');
        icon.classList.add('ti-eye-off');
    } else {
        input.type = 'password';
        icon.classList.remove('ti-eye-off');
        icon.classList.add('ti-eye');
    }
}
</script>
{% endblock %}
