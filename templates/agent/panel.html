{% extends "base.html" %}

{% block title %}Agent Paneli - AI BEE CC{% endblock %}

{% block content %}
<div class="page-header">
    <div class="page-header-content">
        <h1 class="page-title">
            <i class="ti ti-headset"></i>
            Agent Paneli
        </h1>
        <p class="page-subtitle">HoÅŸ geldin, {{ current_user.full_name or current_user.username }}</p>
    </div>
    <div class="page-header-actions">
        <div class="agent-status-selector">
            <select class="form-control" id="agentStatus" onchange="changeStatus(this.value)">
                <option value="available" {% if current_user.status == 'available' %}selected{% endif %}>ðŸŸ¢ MÃ¼sait</option>
                <option value="busy" {% if current_user.status == 'busy' %}selected{% endif %}>ðŸ”´ MeÅŸgul</option>
                <option value="break" {% if current_user.status == 'break' %}selected{% endif %}>ðŸŸ¡ Mola</option>
                <option value="wrap_up" {% if current_user.status == 'wrap_up' %}selected{% endif %}>ðŸŸ  Ä°ÅŸlem SonrasÄ±</option>
            </select>
        </div>
    </div>
</div>

<div class="row">
    <!-- BugÃ¼nkÃ¼ Ä°statistikler -->
    <div class="col-md-3">
        <div class="stat-card">
            <div class="stat-icon">
                <i class="ti ti-phone-call"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value">{{ today_calls }}</div>
                <div class="stat-label">BugÃ¼nkÃ¼ Ã‡aÄŸrÄ±lar</div>
            </div>
        </div>
    </div>
    
    <div class="col-md-3">
        <div class="stat-card success">
            <div class="stat-icon">
                <i class="ti ti-clock"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value">--:--</div>
                <div class="stat-label">Ort. GÃ¶rÃ¼ÅŸme SÃ¼resi</div>
            </div>
        </div>
    </div>
    
    <div class="col-md-3">
        <div class="stat-card warning">
            <div class="stat-icon">
                <i class="ti ti-star"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value">--%</div>
                <div class="stat-label">QA Skoru</div>
            </div>
        </div>
    </div>
    
    <div class="col-md-3">
        <div class="stat-card info">
            <div class="stat-icon">
                <i class="ti ti-target"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value">--%</div>
                <div class="stat-label">Hedef GerÃ§ekleÅŸme</div>
            </div>
        </div>
    </div>
</div>

<!-- Aktif Ã‡aÄŸrÄ± AlanÄ± -->
<div class="row mt-4">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">
                    <i class="ti ti-phone"></i> Aktif Ã‡aÄŸrÄ±
                </h3>
            </div>
            <div class="card-body">
                <div class="no-call-state" id="noCallState">
                    <i class="ti ti-phone-off" style="font-size: 4rem; color: var(--text-muted);"></i>
                    <h4 style="color: var(--text-muted); margin-top: 1rem;">Aktif Ã§aÄŸrÄ± yok</h4>
                    <p style="color: var(--text-muted);">Yeni Ã§aÄŸrÄ± bekleniyor...</p>
                </div>
                
                <div class="active-call-state" id="activeCallState" style="display: none;">
                    <!-- Aktif Ã§aÄŸrÄ± bilgileri buraya gelecek -->
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">
                    <i class="ti ti-robot"></i> AI Asistan
                </h3>
            </div>
            <div class="card-body">
                <div class="ai-suggestions">
                    <p style="color: var(--text-muted); text-align: center;">
                        <i class="ti ti-brain" style="font-size: 2rem;"></i><br>
                        Ã‡aÄŸrÄ± baÅŸladÄ±ÄŸÄ±nda AI Ã¶nerileri burada gÃ¶rÃ¼necek
                    </p>
                </div>
            </div>
        </div>
        
        <div class="card mt-3">
            <div class="card-header">
                <h3 class="card-title">
                    <i class="ti ti-script"></i> HÄ±zlÄ± Scriptler
                </h3>
            </div>
            <div class="card-body">
                <div class="quick-scripts">
                    <button class="btn btn-outline btn-block mb-2">
                        <i class="ti ti-message"></i> KarÅŸÄ±lama
                    </button>
                    <button class="btn btn-outline btn-block mb-2">
                        <i class="ti ti-info-circle"></i> Bilgi Verme
                    </button>
                    <button class="btn btn-outline btn-block mb-2">
                        <i class="ti ti-mood-happy"></i> KapanÄ±ÅŸ
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.agent-status-selector select {
    background: var(--bg-card);
    border: 2px solid var(--primary);
    color: var(--text-primary);
    padding: 0.5rem 1rem;
    border-radius: 8px;
    font-weight: 600;
}

.no-call-state {
    text-align: center;
    padding: 3rem;
}

.quick-scripts .btn {
    text-align: left;
    justify-content: flex-start;
}
</style>

<script>
function changeStatus(status) {
    fetch('/api/agent/status', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({status: status})
    }).then(r => r.json()).then(data => {
        console.log('Status updated:', data);
    });
}
</script>
{% endblock %}
