{% extends "base.html" %}

{% block title %}{{ tenant.name }} - AI BEE CC{% endblock %}

{% block content %}
<div class="page-header">
    <div>
        <h1 class="page-title">{{ tenant.name }}</h1>
        <p class="page-subtitle">{{ tenant.code }} - Tenant Detayları</p>
    </div>
    <div class="d-flex gap-2">
        <a href="{{ url_for('platform_tenant_edit', id=tenant.id) }}" class="btn btn-primary">
            <i class="ti ti-edit"></i> Düzenle
        </a>
        <a href="{{ url_for('platform_tenant_modules', id=tenant.id) }}" class="btn btn-secondary">
            <i class="ti ti-apps"></i> Modüller
        </a>
    </div>
</div>

<div class="grid grid-cols-4 mb-4">
    <div class="stat-card">
        <div class="stat-card-header">
            <div class="stat-card-icon">
                <i class="ti ti-users"></i>
            </div>
        </div>
        <div class="stat-card-value">{{ tenant.users.count() }}</div>
        <div class="stat-card-label">Kullanıcı</div>
    </div>
    
    <div class="stat-card success">
        <div class="stat-card-header">
            <div class="stat-card-icon">
                <i class="ti ti-folder"></i>
            </div>
        </div>
        <div class="stat-card-value">{{ tenant.projects.count() }}</div>
        <div class="stat-card-label">Proje</div>
    </div>
    
    <div class="stat-card warning">
        <div class="stat-card-header">
            <div class="stat-card-icon">
                <i class="ti ti-phone"></i>
            </div>
        </div>
        <div class="stat-card-value">{{ tenant.max_agents }}</div>
        <div class="stat-card-label">Max Agent</div>
    </div>
    
    <div class="stat-card info">
        <div class="stat-card-header">
            <div class="stat-card-icon">
                <i class="ti ti-line"></i>
            </div>
        </div>
        <div class="stat-card-value">{{ tenant.max_concurrent_calls }}</div>
        <div class="stat-card-label">Max Çağrı</div>
    </div>
</div>

<div class="grid grid-cols-2">
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">
                <i class="ti ti-info-circle"></i>
                Genel Bilgiler
            </h3>
        </div>
        <div class="card-body">
            <table class="table">
                <tr>
                    <td class="text-muted">Durum</td>
                    <td>
                        <span class="badge badge-{{ 'success' if tenant.status == 'active' else 'warning' }}">
                            {{ tenant.status|capitalize }}
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="text-muted">Domain</td>
                    <td>{{ tenant.domain or '-' }}</td>
                </tr>
                <tr>
                    <td class="text-muted">Saat Dilimi</td>
                    <td>{{ tenant.timezone }}</td>
                </tr>
                <tr>
                    <td class="text-muted">Dil</td>
                    <td>{{ tenant.language }}</td>
                </tr>
                <tr>
                    <td class="text-muted">Kayıt Saklama</td>
                    <td>{{ tenant.recording_retention_days }} gün</td>
                </tr>
                <tr>
                    <td class="text-muted">Oluşturulma</td>
                    <td>{{ tenant.created_at|datetime }}</td>
                </tr>
            </table>
        </div>
    </div>
    
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">
                <i class="ti ti-apps"></i>
                Aktif Modüller
            </h3>
        </div>
        <div class="card-body">
            {% set modules = ['crm', 'dialer', 'ai', 'omnichannel', 'wfm', 'qa', 'reporting'] %}
            <div class="d-flex flex-wrap gap-2">
                {% for mod in modules %}
                {% set tenant_mod = tenant.modules.filter_by(module_name=mod).first() %}
                <span class="badge badge-{{ 'success' if tenant_mod and tenant_mod.is_enabled else 'secondary' }}">
                    {{ mod|upper }}
                </span>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}

